(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,r){e.exports={container:"with-profile-nav_container__18CWE"}},110:function(e,t,r){e.exports={loader:"loader_loader__2990S"}},111:function(e,t,r){e.exports={table_wrapper:"constructor-page_table_wrapper__V_mjj"}},121:function(e,t,r){},19:function(e,t,r){e.exports={header:"app-header_header__3LbT9",header_container:"app-header_header_container__3byaA",header_left_wrapper:"app-header_header_left_wrapper__3fAJa",header_item:"app-header_header_item__hgvr3",active:"app-header_active__2hHv4"}},202:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(39),s=r.n(c),i=(r(121),r(13)),o=r(11),d=r(29),l=d.c,u=function(){return Object(d.b)()},_=r(6),p=r(19),j=r.n(p),m=r(0),b=function(){var e=Object(i.j)().path,t=l((function(e){return e.user.user}));return Object(m.jsx)("header",{children:Object(m.jsx)("nav",{className:"".concat(j.a.header," pt-4 pb-4"),children:Object(m.jsxs)("div",{className:j.a.header_container,children:[Object(m.jsxs)("ul",{className:j.a.header_left_wrapper,children:[Object(m.jsxs)(o.c,{to:"/",exact:!0,className:"".concat(j.a.header_item," pl-5 pr-5 pt-4 pb-4 mr-2"),activeClassName:j.a.active,children:[Object(m.jsx)("div",{className:"mr-2",children:Object(m.jsx)(_.BurgerIcon,{type:"/"===e?"primary":"secondary"})}),Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(m.jsxs)(o.c,{className:"".concat(j.a.header_item," pl-5 pr-5 pt-4 pb-4"),to:"/feed",exact:!0,activeClassName:j.a.active,children:[Object(m.jsx)("div",{className:"mr-2",children:Object(m.jsx)(_.ListIcon,{type:"/feed"===e?"primary":"secondary"})}),Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u0430"})]})]}),Object(m.jsx)(o.b,{to:"/",className:j.a.header_logo,children:Object(m.jsx)(_.Logo,{})}),!t&&Object(m.jsxs)(o.c,{to:"/login",className:"".concat(j.a.header_item," pl-5 pr-5 pt-4 pb-4"),activeClassName:j.a.active,children:[Object(m.jsx)("div",{className:"mr-2",children:Object(m.jsx)(_.ProfileIcon,{type:"/login"===e?"primary":"secondary"})}),Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})]}),t&&Object(m.jsxs)(o.c,{to:"/profile",className:"".concat(j.a.header_item," pl-5 pr-5 pt-4 pb-4"),activeClassName:j.a.active,children:[Object(m.jsx)("div",{className:"mr-2",children:Object(m.jsx)(_.ProfileIcon,{type:"/profile"===e||"/profile/orders"===e?"primary":"secondary"})}),Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})})},O=function(e){var t=e.children;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(b,{}),t]})},f="USER_REGISTER_REQUEST",x="USER_LOGOUT_REQUEST",h="USER_LOGIN_REQUEST",g="UPDATE_USER_INFO_REQUEST",v="GET_USER_INFO_REQUEST",y="GET_USER_INFO_SUCCESS",N="GET_USER_INFO_FAILED",w="SET_EMAIL",E="RESET_EMAIL",S="SET_PASSWORD",T="RESET_PASSWORD",I="SET_NAME",k="RESET_NAME",C=function(){return{type:g}},R=function(){return{type:v}},D=function(e){return{type:y,payload:e}},A=function(){return{type:N}},L=function(e){return{type:w,payload:e}},U=function(){return{type:E}},M=function(e){return{type:S,payload:e}},P=function(){return{type:T}},F=function(e){return{type:I,payload:e}},B=r(30),G=r.n(B),q=function(){var e=u();return Object(m.jsxs)("div",{className:"".concat(G.a.container_nav," pt-30"),children:[Object(m.jsx)(o.c,{to:"/profile",className:"".concat(G.a.container_nav_item," text text_type_main-medium"),activeClassName:G.a.active,exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(m.jsx)(o.c,{to:"/profile/orders",className:"".concat(G.a.container_nav_item," text text_type_main-medium"),activeClassName:G.a.active,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(m.jsx)("div",{className:"".concat(G.a.container_nav_item," text text_type_main-medium"),onClick:function(){e({type:x})},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(m.jsx)("p",{className:"".concat(G.a.container_nav_descr," text text_type_main-default mt-20"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},Q=r(108),J=r.n(Q),W=function(e){var t=e.children;return Object(m.jsxs)("div",{className:"".concat(J.a.container),children:[Object(m.jsx)(q,{}),t]})},z=r(208),X=r(114),Z=r(23),H=d.c,V=r(209),K=r(40),Y=r.n(K),$=function(e){var t=e.ingredient,r=e.count,n=e.onIngredientClick,a=Object(i.h)(),c=t.name,s=t.price,d=t.image,l=t._id,u=Object(V.a)({type:"constructor",item:t}),p=Object(Z.a)(u,2)[1];return Object(m.jsxs)(o.b,{to:{pathname:"/ingredients/".concat(l),state:{background:a}},onClick:function(){return n(t)},className:"".concat(Y.a.ingredient),ref:p,"data-test":"ingredient",children:[Object(m.jsxs)("div",{className:"pl-4 pb-1 pr-4",children:[r&&Object(m.jsx)("div",{className:Y.a.ingredient_counter,children:Object(m.jsx)(_.Counter,{count:r,size:"default"})}),Object(m.jsx)("img",{className:"".concat(Y.a.ingredient_img," mb-1"),src:d,alt:c}),Object(m.jsxs)("div",{className:"".concat(Y.a.ingredient_price_wrapper," mb-1"),children:[Object(m.jsx)("span",{className:"text text_type_digits-default",children:s}),Object(m.jsx)(_.CurrencyIcon,{type:"primary"})]})]}),Object(m.jsx)("h3",{className:"".concat(Y.a.ingredient_name," text text_type_main-default"),children:c})]})},ee=r(85),te=r.n(ee),re=function(e){var t=e.title,r=e.type,a=e.onIngredientClick,c=l((function(e){return{ingredients:e.ingredients.ingredients,constructorIngredients:e.ingredients.constructorIngredients,constructorBun:e.ingredients.constructorBun}})),s=c.ingredients,i=c.constructorIngredients,o=c.constructorBun,d=Object(n.useMemo)((function(){var e={};return i.map((function(t){e[t._id]||(e[t._id]=0),e[t._id]++})),o&&(e[o._id]=2),e}),[i,o]),u=null===s||void 0===s?void 0:s.map((function(e){if(e.type===r)return Object(m.jsx)($,{ingredient:e,count:d[e._id],onIngredientClick:a},e._id)}));return Object(m.jsxs)("div",{"data-scroll-id":r,className:"".concat(te.a.type_wrapper," pt-10"),children:[Object(m.jsx)("h3",{className:"text text_type_main-medium mb-6",children:t}),Object(m.jsx)("div",{className:te.a.ingredients_type_wrapper,children:u})]})},ne=r(110),ae=r.n(ne),ce=function(){return Object(m.jsx)("div",{className:ae.a.loader,children:Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{background:"none",display:"block",shapeRendering:"auto"},width:"60px",height:"60px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(m.jsxs)("circle",{cx:"84",cy:"50",r:"10",fill:"#0051a2",children:[Object(m.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"0.25s",calcMode:"spline",keyTimes:"0;1",values:"10;0",keySplines:"0 0.5 0.5 1",begin:"0s"}),Object(m.jsx)("animate",{attributeName:"fill",repeatCount:"indefinite",dur:"1s",calcMode:"discrete",keyTimes:"0;0.25;0.5;0.75;1",values:"#0051a2;#89bff8;#408ee0;#1b75be;#0051a2",begin:"0s"})]}),Object(m.jsxs)("circle",{cx:"16",cy:"50",r:"10",fill:"#0051a2",children:[Object(m.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"0s"}),Object(m.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"0s"})]}),Object(m.jsxs)("circle",{cx:"50",cy:"50",r:"10",fill:"#1b75be",children:[Object(m.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.25s"}),Object(m.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.25s"})]}),Object(m.jsxs)("circle",{cx:"84",cy:"50",r:"10",fill:"#408ee0",children:[Object(m.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.5s"}),Object(m.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.5s"})]}),Object(m.jsxs)("circle",{cx:"16",cy:"50",r:"10",fill:"#89bff8",children:[Object(m.jsx)("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"0;0;10;10;10",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.75s"}),Object(m.jsx)("animate",{attributeName:"cx",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keyTimes:"0;0.25;0.5;0.75;1",values:"16;16;16;50;84",keySplines:"0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1;0 0.5 0.5 1",begin:"-0.75s"})]})]})})},se=r(41),ie=r.n(se),oe=function(e){var t=e.handleIngredientClick,r=Object(n.useState)("bun"),a=Object(Z.a)(r,2),c=a[0],s=a[1],i=Object(n.useRef)(null),o=H((function(e){return{ingredients:e.ingredients.ingredients}})).ingredients,d=function(e){var t=document.querySelector('[data-scroll-id="'.concat(e,'"]'));if(t&&t instanceof HTMLElement){var r,n=t.offsetTop;null===(r=i.current)||void 0===r||r.scroll({left:0,top:n-247,behavior:"smooth"})}};return Object(m.jsxs)("section",{className:"".concat(ie.a.section_container," pt-10"),children:[Object(m.jsx)("h1",{className:"".concat(ie.a.title," text text_type_main-large mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(m.jsxs)("div",{className:ie.a.ingredients_wrapper,children:[!o&&Object(m.jsx)(ce,{}),o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"".concat(ie.a.tab_wrapper),children:[Object(m.jsx)(_.Tab,{active:"bun"===c,onClick:function(){return d("bun")},value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(m.jsx)(_.Tab,{active:"sauce"===c,onClick:function(){return d("sauce")},value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(m.jsx)(_.Tab,{active:"main"===c,onClick:function(){return d("main")},value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(m.jsx)("div",{onScroll:function(e){var t=document.querySelector('[data-scroll-id="bun"]'),r=document.querySelector('[data-scroll-id="sauce"]'),n=document.querySelector('[data-scroll-id="main"]');e.target.scrollTop+248>t.offsetTop&&e.target.scrollTop+248<r.offsetTop&&"bun"!==c?s("bun"):e.target.scrollTop+248>r.offsetTop&&e.target.scrollTop+248<n.offsetTop&&"sauce"!==c?s("sauce"):e.target.scrollTop+248>n.offsetTop&&"main"!==c&&s("main")},ref:i,className:"".concat(ie.a.ingredients_items_wrapper," pl-4 pb-10"),children:[{title:"\u0411\u0443\u043b\u043a\u0438",type:"bun"},{title:"\u0421\u043e\u0443\u0441\u044b",type:"sauce"},{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",type:"main"}].map((function(e){return Object(m.jsx)(re,{onIngredientClick:t,title:e.title,type:e.type},e.type)}))})]})]})]})},de=r(3),le=r(210),ue=r(211),_e="GET_INGREDIENTS_REQUEST",pe="GET_INGREDIENTS_SUCCESS",je="GET_INGREDIENTS_FAILED",me="ADD_INGREDIENT_TO_CONSTRUCTOR",be="DELETE_INGREDIENT_FROM_CONSTRUCTOR",Oe="ADD_BUN_TO_CONSTRUCTOR",fe="MOVE_INGREDIENT_IN_CONSTRUCTOR",xe="RESET_CONSTRUCTOR",he=r(63),ge=r.n(he),ve=function(e){var t=e.ingredient,r=e.index,a=u(),c=Object(n.useRef)(null),s=function(e){a(function(e){return{type:be,payload:e}}(e))},i=Object(le.a)({accept:"ingredient",collect:function(e){return{isHover:e.isOver()}},hover:function(e,t){var n;if(c.current){var s=e.index,i=r;if(s!==i){var o=null===(n=c.current)||void 0===n?void 0:n.getBoundingClientRect(),d=(o.bottom-o.top)/2,l=t.getClientOffset();if(l){var u=l.y-o.top;if(s<i&&u<d)return;if(s>i&&u>d)return;a({type:fe,payload:{hoverIndex:i,dragIndex:s}}),e.index=i}}}}}),o=Object(Z.a)(i,2)[1],d=Object(V.a)({type:"ingredient",item:function(){return{index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(Z.a)(d,2),p=l[0].isDragging;return(0,l[1])(o(c)),Object(m.jsxs)("div",{ref:c,className:"".concat(ge.a.constructor_item," ").concat(p?ge.a.active:""," show_item"),"data-test":"constructor-ingredient",children:[Object(m.jsx)("div",{className:ge.a.drag_icon,children:Object(m.jsx)(_.DragIcon,{type:"secondary"})}),Object(m.jsx)(_.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return s(t)}})]})},ye=r(42),Ne=r.n(ye),we=function(e){var t=e.handleOrderClick,r=Object(i.g)(),a=Object(i.h)(),c=l((function(e){return{constructorIngredients:e.ingredients.constructorIngredients,constructorBun:e.ingredients.constructorBun,user:e.user.user}})),s=c.constructorIngredients,o=c.constructorBun,d=c.user,p=u(),j=Object(le.a)({accept:"constructor",drop:function(e){var t;"bun"!==e.type?p((t=Object(de.a)(Object(de.a)({},e),{},{drag_id:Object(ue.a)()}),{type:me,payload:t})):p({type:Oe,payload:e})}}),b=Object(Z.a)(j,2)[1],O=Object(n.useMemo)((function(){return o||s.length>0?s.reduce((function(e,t){return e+t.price}),0)+2*(o?o.price:0):0}),[s,o]);return Object(m.jsxs)("section",{className:"".concat(Ne.a.section_container," pt-25"),children:[Object(m.jsxs)("div",{className:"pt-4 pr-4",ref:b,"data-test":"constructor",children:[!o&&0===s.length&&Object(m.jsx)("p",{className:"".concat(Ne.a.no_ingredients," text text_type_main-default"),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0431\u0443\u043b\u043e\u0447\u043a\u0443 \u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"}),o&&Object(m.jsx)("div",{className:"pl-8 mb-4 show_item",children:Object(m.jsx)(_.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(o.name," (\u0432\u0435\u0440\u0445)"),price:o.price,thumbnail:o.image})}),s.length>0&&Object(m.jsx)("div",{className:"".concat(Ne.a.wrapper_inner," mb-4"),children:s.map((function(e,t){return Object(m.jsx)(ve,{index:t,ingredient:e},e.drag_id)}))}),o&&Object(m.jsx)("div",{className:"pl-8 pr-4 show_item",children:Object(m.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(o.name," (\u043d\u0438\u0437)"),price:o.price,thumbnail:o.image})})]}),Object(m.jsxs)("div",{className:"".concat(Ne.a.constructor_footer),children:[Object(m.jsxs)("div",{className:"".concat(Ne.a.total_wrapper," mr-10"),children:[Object(m.jsx)("span",{className:"text text_type_digits-medium",children:O}),Object(m.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(m.jsx)("div",{onClick:function(){d?o&&s.length>0&&t(a):r.push({pathname:"/login"})},children:Object(m.jsx)(_.Button,{type:"primary",size:"medium",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]})},Ee=r(111),Se=r.n(Ee),Te=function(e){var t=e.handleIngredientClick,r=e.handleOrderClick;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(z.a,{backend:X.a,children:Object(m.jsxs)("section",{className:Se.a.table_wrapper,children:[Object(m.jsx)(oe,{handleIngredientClick:t}),Object(m.jsx)(we,{handleOrderClick:r})]})})})},Ie=r(31),ke=r.n(Ie),Ce=function(){var e=u(),t=Object(i.h)().state,r=l((function(e){return{email:e.user.email,password:e.user.password,user:e.user.user}})),n=r.email,a=r.password;return r.user?Object(m.jsx)(i.a,{to:(null===t||void 0===t?void 0:t.from)||"/"}):Object(m.jsx)("div",{className:"".concat(ke.a.form_container," pt-15"),children:Object(m.jsxs)("div",{className:ke.a.form_wrapper,children:[Object(m.jsx)("div",{className:"mb-20",children:Object(m.jsx)(_.Logo,{})}),Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e({type:h})},className:"".concat(ke.a.form," mb-20"),children:[Object(m.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.EmailInput,{name:"email",value:n,onChange:function(t){return e(L(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.PasswordInput,{name:"password",value:a,onChange:function(t){return e(M(t.target.value))}})}),Object(m.jsx)(_.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(m.jsxs)("p",{className:"".concat(ke.a.form_descr," text text_type_main-default mb-4"),children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(m.jsx)(o.b,{to:{pathname:"/register",state:"fromLogin"},className:ke.a.form_link,children:"\u0417\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsxs)("p",{className:"".concat(ke.a.form_descr," text text_type_main-default"),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(m.jsx)(o.b,{to:{pathname:"/forgot-password",state:"fromLogin"},className:ke.a.form_link,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},Re=r(43),De=r.n(Re),Ae=function(){var e=u(),t=Object(i.h)(),r=l((function(e){return{email:e.user.email,password:e.user.password,name:e.user.name,user:e.user.user}})),n=r.name,a=r.email,c=r.password;return r.user?Object(m.jsx)(i.a,{to:"/"}):"fromLogin"!==t.state?Object(m.jsx)(i.a,{to:"/login"}):Object(m.jsx)("div",{className:"".concat(De.a.form_container," pt-15"),children:Object(m.jsxs)("div",{className:De.a.form_wrapper,children:[Object(m.jsx)("div",{className:"mb-20",children:Object(m.jsx)(_.Logo,{})}),Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e({type:f})},className:"".concat(De.a.form," mb-10"),children:[Object(m.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n,onChange:function(t){return e(F(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.EmailInput,{name:"email",value:a,onChange:function(t){return e(L(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.PasswordInput,{name:"email",value:c,onChange:function(t){return e(M(t.target.value))}})}),Object(m.jsx)(_.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsxs)("p",{className:"".concat(De.a.form_descr," text text_type_main-default mb-4"),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(m.jsx)(o.b,{to:"/login",className:De.a.form_link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Le="SEND_EMAIL_REQUEST",Ue="SEND_EMAIL_SUCCESS",Me="SEND_EMAIL_FAILED",Pe="RESET_PASSWORD_REQUEST",Fe="RESET_PASSWORD_SUCCESS",Be="RESET_PASSWORD_FAILED",Ge="SET_EMAILCODE",qe="RESET_EMAILCODE",Qe=function(e){return{type:Ue,payload:e}},Je=function(e){return{type:Fe,payload:e}},We=r(44),ze=r.n(We),Xe=function(){var e=u(),t=Object(i.h)(),r=Object(i.g)(),a=l((function(e){return{email:e.user.email,user:e.user.user,sendEmailSuccess:e.resetPassword.sendEmailSuccess}})),c=a.email,s=a.user,d=a.sendEmailSuccess;return Object(n.useEffect)((function(){d&&d.success&&r.replace({pathname:"/reset-password",state:"fromForgotPassword"})}),[d,r,e]),s?Object(m.jsx)(i.a,{to:"/"}):"fromLogin"!==t.state?Object(m.jsx)(i.a,{to:"/login"}):Object(m.jsx)("div",{className:"".concat(ze.a.form_container," pt-15"),children:Object(m.jsxs)("div",{className:ze.a.form_wrapper,children:[Object(m.jsx)("div",{className:"mb-20",children:Object(m.jsx)(_.Logo,{})}),Object(m.jsxs)("form",{className:"".concat(ze.a.form," mb-20"),onSubmit:function(t){t.preventDefault(),e({type:Le})},children:[Object(m.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.Input,{type:"text",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:c,onChange:function(t){return e(L(t.target.value))}})}),Object(m.jsx)(_.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(m.jsxs)("p",{className:"".concat(ze.a.form_descr," text text_type_main-default mb-4"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(m.jsx)(o.b,{to:"/login",className:ze.a.form_link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ze=r(45),He=r.n(Ze),Ve=function(){var e=u(),t=Object(i.h)(),r=Object(i.g)(),a=l((function(e){return{password:e.user.password,emailCode:e.resetPassword.emailCode,user:e.user.user,resetPasswordSuccess:e.resetPassword.resetPasswordSuccess}})),c=a.password,s=a.emailCode,d=a.user,p=a.resetPasswordSuccess;Object(n.useEffect)((function(){p&&p.success&&r.replace({pathname:"/login"})}),[r,p]);return d?Object(m.jsx)(i.a,{to:"/"}):"fromForgotPassword"!==t.state?Object(m.jsx)(i.a,{to:"/login"}):Object(m.jsx)("div",{className:"".concat(He.a.form_container," pt-15"),children:Object(m.jsxs)("div",{className:He.a.form_wrapper,children:[Object(m.jsx)("div",{className:"mb-20",children:Object(m.jsx)(_.Logo,{})}),Object(m.jsxs)("form",{className:"".concat(He.a.form," mb-20"),onSubmit:function(t){t.preventDefault(),e({type:Pe})},children:[Object(m.jsx)("h3",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.PasswordInput,{name:"password",value:c,onChange:function(t){return e(M(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:s,onChange:function(t){return e((r=t.target.value,{type:Ge,payload:r}));var r}})}),Object(m.jsx)(_.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(m.jsxs)("p",{className:"".concat(He.a.form_descr," text text_type_main-default mb-4"),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(m.jsx)(o.b,{to:"/login",className:He.a.form_link,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ke=r(54),Ye=r.n(Ke),$e=function(){var e=u(),t=l((function(e){return{email:e.user.email,name:e.user.name,password:e.user.password}})),r=t.email,n=t.name,a=t.password;return Object(m.jsx)("div",{className:"".concat(Ye.a.container_form," pt-30"),children:Object(m.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(C())},className:Ye.a.form_wrapper,children:[Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:n,onChange:function(t){return e(F(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.EmailInput,{name:"email",value:r,onChange:function(t){return e(L(t.target.value))}})}),Object(m.jsx)("div",{className:"mb-6",children:Object(m.jsx)(_.PasswordInput,{name:"password",value:a,onChange:function(t){return e(M(t.target.value))}})}),Object(m.jsxs)("div",{className:Ye.a.profile_btn_wrapper,children:[Object(m.jsx)("div",{className:"".concat(Ye.a.profile_btn_cancel," text text_type_main-default"),children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(m.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})},et=r(25),tt=r.n(et),rt=function(e){var t,r,a=e.onOrderClick,c=e.orderInfo,s=Object(i.h)(),d=Object(i.j)().path,u=c.createdAt,p=c.ingredients,j=c.name,b=c.number,O=c._id,f=l((function(e){return{ingredientsStore:e.ingredients.ingredients}})).ingredientsStore,x=Object(n.useMemo)((function(){return p.map((function(e){return null===f||void 0===f?void 0:f.find((function(t){return t._id===e}))})).filter((function(e){return Boolean(e)}))}),[p,f]),h=Object(n.useMemo)((function(){return x.reduce((function(e,t){return t?e+t.price:e+0}),0)}),[x]),g=Object(n.useMemo)((function(){return[x.slice(0,5),x.slice(5)]}),[x]),v=Object(n.useMemo)((function(){if(c)switch(c.status){case"created":return"\u0421\u043e\u0437\u0434\u0430\u043d";case"pending":return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";default:return""}}),[c]);return Object(m.jsx)(o.b,{to:{pathname:"".concat(s.pathname,"/").concat(O),state:{background:s}},onClick:function(){a(c,x)},className:tt.a.container_orders_item_wrapper,children:Object(m.jsxs)("div",{className:"".concat(tt.a.container_orders_item," mb-6 p-6"),children:[Object(m.jsxs)("div",{className:"".concat(tt.a.order_header," mb-6"),children:[Object(m.jsxs)("p",{className:"text text_type_digits-default",children:["#",b]}),Object(m.jsx)("p",{className:"text text_type_main-small dark_gray",children:u})]}),Object(m.jsx)("h4",{className:"text text_type_main-medium mb-2",children:j}),"/profile/orders"===d&&Object(m.jsx)("p",{className:"text text_type_main-small ".concat("done"===c.status?"blue":""),children:v}),Object(m.jsxs)("div",{className:"".concat(tt.a.container_orders_item_footer," mt-6"),children:[Object(m.jsxs)("div",{className:tt.a.container_orders_item_ingredients,children:[g[0].map((function(e,t){return Object(m.jsx)("div",{className:tt.a.container_orders_item_ingredient,style:{transform:"translateX(-".concat(15*t,"px)"),zIndex:6-t},children:Object(m.jsx)("img",{src:null===e||void 0===e?void 0:e.image,alt:null===e||void 0===e?void 0:e.name})},t)})),g[1].length>0&&Object(m.jsxs)("div",{className:tt.a.container_orders_item_ingredient,style:{transform:"translateX(-75px)",zIndex:1},children:[Object(m.jsx)("img",{src:null===(t=g[0][0])||void 0===t?void 0:t.image,alt:null===(r=g[0][0])||void 0===r?void 0:r.name}),Object(m.jsxs)("div",{className:"".concat(tt.a.container_orders_item_ingredient_length," text text_type_main-default"),children:["+",g[1].length]})]})]}),Object(m.jsxs)("div",{className:"".concat(tt.a.container_orders_item_total),children:[Object(m.jsx)("span",{className:"text text_type_digits-default mr-2",children:h}),Object(m.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})})},nt="WS_ALL_ORDERS_CONNECTION_SUCCESS",at="WS_ALL_ORDERS_CONNECTION_ERROR",ct="WS_ALL_ORDERS_CONNECTION_CLOSED",st="WS_ALL_ORDERS_GET_MESSAGE",it="WS_ALL_ORDERS_CONNECTION_START",ot="WS_USER_ORDERS_CONNECTION_SUCCESS",dt="WS_USER_ORDERS_CONNECTION_ERROR",lt="WS_USER_ORDERS_CONNECTION_CLOSED",ut="WS_USER_ORDERS_GET_MESSAGE",_t="WS_USER_ORDERS_CONNECTION_START",pt=function(){return{type:_t}},jt=r(87),mt=r.n(jt),bt=function(e){var t=e.handleOrderInfoClick,r=u(),a=l((function(e){return{userOrders:e.wsOrders.userOrders}})).userOrders;Object(n.useEffect)((function(){r(pt())}),[]);var c=Object(n.useMemo)((function(){if(a&&a.orders)return a.orders.map((function(e){if(e&&e.ingredients)return Object(m.jsx)(rt,{onOrderClick:t,orderInfo:e},e._id)}))}),[a,t]);return Object(m.jsx)("div",{className:"".concat(mt.a.container_orders," pt-12"),children:Object(m.jsx)("div",{className:mt.a.container_orders_wrapper,children:c})})},Ot=r(26),ft=r.n(Ot),xt=function(e){var t=e.handleOrderInfoClick,r=l((function(e){return{allOrders:e.wsOrders.allOrders,wsAllOrdersConnect:e.wsOrders.wsAllOrdersConnect,ingredients:e.ingredients.ingredients}})),a=r.allOrders,c=r.ingredients,s=r.wsAllOrdersConnect,i=function(e){if(!a)return null;var t=null===a||void 0===a?void 0:a.orders.filter((function(t){return t.status===e}));return t.length>10?t.slice(0,10):t},o=i("pending"),d=i("done"),u=Object(n.useMemo)((function(){if(a&&c)return a.orders.map((function(e){if(e&&e.ingredients)return Object(m.jsx)(rt,{orderInfo:e,onOrderClick:t},e._id)}))}),[a,t,c]);return Object(m.jsxs)("div",{className:"".concat(ft.a.container," pt-10"),children:[Object(m.jsx)("h2",{className:"text text_type_main-large mb-10",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),!s&&Object(m.jsx)("p",{className:"text text_type_main-large mb-10 dark_gray",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :("}),a&&c&&s&&Object(m.jsxs)("div",{className:ft.a.container_wrapper,children:[Object(m.jsx)("div",{className:ft.a.orders_wrapper,children:u}),Object(m.jsxs)("div",{className:ft.a.details_wrapper,children:[Object(m.jsxs)("div",{className:"".concat(ft.a.details_column," mb-15"),children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(m.jsx)("div",{className:ft.a.orders_status_column,children:null===d||void 0===d?void 0:d.map((function(e){return Object(m.jsx)("p",{className:"text text_type_digits-default mb-2 blue",children:e.number},e._id)}))})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("h4",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(m.jsx)("div",{className:ft.a.orders_status_column,children:null===o||void 0===o?void 0:o.map((function(e){return Object(m.jsx)("p",{className:"text text_type_digits-default mb-2",children:e.number},e._id)}))})]})]}),Object(m.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(m.jsx)("p",{className:"".concat(ft.a.order_done_text," text text_type_digits-medium text_shadow"),children:a.total.toLocaleString("ru-RU")}),Object(m.jsx)("h3",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(m.jsx)("p",{className:"".concat(ft.a.order_done_text," text text_type_digits-medium text_shadow"),children:a.totalToday.toLocaleString("ru-RU")})]})]})]})},ht="SET_MODAL_INNER_INGREDIENT_DETAILS",gt="SET_MODAL_INNER_ORDER_DETAILS",vt="SET_CURRENT_INGREDIENT",yt="SET_MODAL_INNER_ORDER_INFO",Nt="SET_CURRENT_ORDER_INFO",wt=function(e){return{type:vt,payload:e}},Et=function(e){return{type:Nt,payload:e}},St=r(32),Tt=r.n(St),It=function(){var e=l((function(e){return e.modal.currentIngredient}));return Object(m.jsxs)("div",{children:[Object(m.jsx)("img",{className:"".concat(Tt.a.image," mb-4"),src:null===e||void 0===e?void 0:e.image,alt:null===e||void 0===e?void 0:e.name}),Object(m.jsx)("p",{className:"text text_type_main-medium ".concat(Tt.a.subtitle," mb-8"),children:null===e||void 0===e?void 0:e.name}),Object(m.jsxs)("div",{className:Tt.a.footer,children:[Object(m.jsxs)("div",{className:Tt.a.footer_item,children:[Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(m.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.calories})]}),Object(m.jsxs)("div",{className:Tt.a.footer_item,children:[Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.proteins})]}),Object(m.jsxs)("div",{className:Tt.a.footer_item,children:[Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.fat})]}),Object(m.jsxs)("div",{className:Tt.a.footer_item,children:[Object(m.jsx)("span",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(m.jsx)("span",{className:"text text_type_digits-default",children:null===e||void 0===e?void 0:e.carbohydrates})]})]})]})},kt=r(88),Ct=r.n(kt),Rt=function(){var e=Object(i.i)().id,t=u(),r=l((function(e){return{ingredients:e.ingredients.ingredients,currentIngredient:e.modal.currentIngredient}})),a=r.ingredients,c=r.currentIngredient;return Object(n.useEffect)((function(){if(a){var r=a.find((function(t){return t._id===e}));r&&t(wt(r))}}),[a,e,t]),Object(m.jsxs)("div",{className:Ct.a.ingredient_wrapper,children:[Object(m.jsx)("h3",{className:"".concat(Ct.a.ingredient_title," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),c&&Object(m.jsx)(It,{})]})},Dt=r(27),At=r.n(Dt),Lt=r.p+"static/media/order-detail.9f47fe93.svg",Ut=r.p+"static/media/stroke.bd47ec5e.svg",Mt=function(){var e=Object(i.i)().id;return Object(m.jsx)("div",{className:At.a.order_wrapper,children:Object(m.jsxs)("div",{className:"pt-20 pb-20",children:[Object(m.jsx)("p",{className:"".concat(At.a.count," text text_type_digits-large mb-8"),children:e}),Object(m.jsx)("h4",{className:"".concat(At.a.count_descr," text text_type_main-medium mb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(m.jsxs)("div",{className:"".concat(At.a.image_wrapper," mb-15"),children:[Object(m.jsx)("img",{className:At.a.accept,src:Ut,alt:"accept"}),Object(m.jsx)("img",{className:At.a.background,src:Lt,alt:"background"})]}),Object(m.jsx)("p",{className:"".concat(At.a.footer_title," text text_type_main-default mb-2"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("p",{className:"".concat(At.a.footer_descr," text text_type_main-default"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},Pt=r(36),Ft=r.n(Pt),Bt=document.getElementById("modal-root"),Gt=function(e){var t=e.closeModal,r=e.children,n=l((function(e){return e.modal.modalInner}));return Bt?s.a.createPortal(Object(m.jsxs)("div",{className:Ft.a.modal_wrapper,children:[Object(m.jsxs)("div",{className:"".concat(Ft.a.modal," pt-10 pl-10 pr-10 pb-10 show_item"),children:[(null===n||void 0===n?void 0:n.title)&&"ingredientDetails"===n.type&&Object(m.jsx)("h3",{className:"text text_type_main-large ".concat(Ft.a.modal_title),children:n.title}),(null===n||void 0===n?void 0:n.title)&&"orderInfo"===n.type&&Object(m.jsx)("h3",{className:"text text_type_digits-default ".concat(Ft.a.modal_title),children:n.title}),Object(m.jsx)("div",{className:Ft.a.modal_close,onClick:t,children:Object(m.jsx)(_.CloseIcon,{type:"primary"})}),r]}),Object(m.jsx)("div",{onClick:t,className:Ft.a.modal_overlay})]}),Bt):null},qt=r(33),Qt=r.n(qt),Jt=function(){var e=l((function(e){return{order:e.order.order,orderRequest:e.order.orderRequest}})),t=e.order;return e.orderRequest?Object(m.jsx)(ce,{}):Object(m.jsxs)("div",{className:"pt-20 pb-20",children:[Object(m.jsx)("p",{className:"".concat(Qt.a.count," text text_type_digits-large mb-8"),children:null===t||void 0===t?void 0:t.number}),Object(m.jsx)("h4",{className:"".concat(Qt.a.count_descr," text text_type_main-medium mb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(m.jsxs)("div",{className:"".concat(Qt.a.image_wrapper," mb-15"),children:[Object(m.jsx)("img",{className:Qt.a.accept,src:Ut,alt:"accept"}),Object(m.jsx)("img",{className:Qt.a.background,src:Lt,alt:"background"})]}),Object(m.jsx)("p",{className:"".concat(Qt.a.footer_title," text text_type_main-default mb-2"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(m.jsx)("p",{className:"".concat(Qt.a.footer_descr," text text_type_main-default"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Wt=r(34),zt=r.n(Wt),Xt=function(){var e=l((function(e){return{currentOrderInfo:e.modal.currentOrderInfo}})).currentOrderInfo,t=Object(n.useMemo)((function(){if(e)switch(e.order.status){case"created":return"\u0421\u043e\u0437\u0434\u0430\u043d";case"pending":return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case"done":return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";default:return""}}),[e]),r=Object(n.useMemo)((function(){return e?e.ingredientsArr.reduce((function(e,t){return e+t.price}),0):0}),[e]);return Object(m.jsx)("div",{className:"mt-4",children:e&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h4",{className:"text text_type_main-medium mb-4",children:e.order.name}),Object(m.jsx)("p",{className:"text text_type_main-default mb-4 blue",children:t}),Object(m.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(m.jsx)("div",{className:"".concat(zt.a.order_info_wrapper," pr-6 mb-10"),children:e.ingredientsArr.map((function(e,t){return Object(m.jsxs)("div",{className:"".concat(zt.a.order_info_item),children:[Object(m.jsx)("div",{className:"".concat(zt.a.order_info_icon," mr-4"),children:Object(m.jsx)("img",{className:zt.a.order_info_image,src:e.image,alt:e.name})}),Object(m.jsx)("p",{className:"".concat(zt.a.order_info_title," text text_type_main-default"),children:e.name}),Object(m.jsx)("p",{className:"text text_type_digits-default mr-2",children:e.price}),Object(m.jsx)(_.CurrencyIcon,{type:"primary"})]},t)}))}),Object(m.jsxs)("div",{className:"".concat(zt.a.order_info_footer),children:[Object(m.jsx)("p",{className:"".concat(zt.a.order_info_time," text text_type_main-default dark_gray"),children:e.order.createdAt}),Object(m.jsx)("p",{className:"text text_type_digits-default mr-2",children:r}),Object(m.jsx)(_.CurrencyIcon,{type:"primary"})]})]})})},Zt=r(8),Ht=r.n(Zt),Vt=r(112),Kt=r(62),Yt=["children"],$t=function(e){var t=e.children,r=Object(Kt.a)(e,Yt),a=u(),c=l((function(e){return e.user.user})),s=Object(n.useState)(!1),o=Object(Z.a)(s,2),d=o[0],_=o[1],p=function(){var e=Object(Vt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(R());case 2:_(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[]),d?Object(m.jsx)(i.b,Object(de.a)(Object(de.a)({},r),{},{render:function(e){var r=e.location;return c?t:Object(m.jsx)(i.a,{to:{pathname:"/login",state:{from:r}}})}})):null},er="GET_ORDER_REQUEST",tr="GET_ORDER_SUCCESS",rr="GET_ORDER_FAILED",nr="ORDER_RESET",ar=function(){return{type:er}},cr=function(){return{type:rr}},sr=r(89),ir=r.n(sr),or=function(){var e=Object(i.i)(),t=Object(i.j)().path,r=u(),a=l((function(e){return{ingredients:e.ingredients.ingredients,allOrders:e.wsOrders.allOrders,userOrders:e.wsOrders.userOrders,currentOrderInfo:e.modal.currentOrderInfo}})),c=a.ingredients,s=a.allOrders,o=a.userOrders,d=a.currentOrderInfo;Object(n.useEffect)((function(){"/profile/orders/:id"===t&&r(pt())}),[]);var _=function(t){var n=t.orders.find((function(t){return t._id===e.id}));if(n){var a=n.ingredients.map((function(e){var t=null===c||void 0===c?void 0:c.find((function(t){return t._id===e}));if(t)return t}));r(Et({order:n,ingredientsArr:a}))}};return Object(n.useEffect)((function(){c&&s&&"/feed/:id"===t&&_(s),c&&o&&"/profile/orders/:id"===t&&_(o)}),[s,c,o]),Object(m.jsxs)("div",{className:ir.a.order_wrapper,children:[d&&Object(m.jsxs)("h3",{className:"".concat(ir.a.title," text text_type_digits-medium"),children:["#",d.order.number]}),Object(m.jsx)(Xt,{})]})},dr=function(){var e=function(){var e=u(),t=Object(i.g)(),r=Object(i.h)(),a="PUSH"===t.action&&r.state&&r.state.background,c=l((function(e){return{modalInner:e.modal.modalInner}})).modalInner,s="ingredientDetails",o="orderDetails",d="orderInfo",_=function(t,r){var n;e(Et({order:t,ingredientsArr:r})),e((n="#".concat(t.number),{type:yt,payload:n}))},p=function(){e({type:nr}),t.goBack()};return Object(n.useEffect)((function(){e({type:_e}),localStorage.getItem("refreshToken")&&e(R()),e({type:it})}),[e]),Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&p()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(m.jsxs)(m.Fragment,{children:[a&&Object(m.jsx)(i.b,{path:"/:type/:id",children:Object(m.jsxs)(Gt,{closeModal:p,children:[(null===c||void 0===c?void 0:c.type)===s&&Object(m.jsx)(It,{}),(null===c||void 0===c?void 0:c.type)===o&&Object(m.jsx)(Jt,{}),(null===c||void 0===c?void 0:c.type)===d&&Object(m.jsx)(Xt,{})]})}),Object(m.jsxs)(i.d,{location:a||r,children:[Object(m.jsx)(i.b,{path:"/",exact:!0,children:Object(m.jsx)(O,{children:Object(m.jsx)(Te,{handleIngredientClick:function(t){e(wt(t)),e({type:ht})},handleOrderClick:function(r){e({type:gt}),t.push({pathname:"/order-details/4321",state:{background:r}}),e(ar())}})})}),Object(m.jsx)(i.b,{path:"/ingredients/:id",children:Object(m.jsx)(O,{children:Object(m.jsx)(Rt,{})})}),Object(m.jsx)(i.b,{path:"/feed/:id",children:Object(m.jsx)(O,{children:Object(m.jsx)(or,{})})}),Object(m.jsx)(i.b,{path:"/order-details/:id",children:Object(m.jsx)(O,{children:Object(m.jsx)(Mt,{})})}),Object(m.jsx)($t,{path:"/profile/orders/:id",children:Object(m.jsx)(O,{children:Object(m.jsx)(or,{})})}),Object(m.jsx)(i.b,{path:"/login",children:Object(m.jsx)(O,{children:Object(m.jsx)(Ce,{})})}),Object(m.jsx)(i.b,{path:"/register",children:Object(m.jsx)(O,{children:Object(m.jsx)(Ae,{})})}),Object(m.jsx)(i.b,{path:"/feed",exact:!0,children:Object(m.jsx)(O,{children:Object(m.jsx)(xt,{handleOrderInfoClick:_})})}),Object(m.jsx)($t,{path:"/profile",exact:!0,children:Object(m.jsx)(O,{children:Object(m.jsx)(W,{children:Object(m.jsx)($e,{})})})}),Object(m.jsx)($t,{path:"/profile/orders",children:Object(m.jsx)(O,{children:Object(m.jsx)(W,{children:Object(m.jsx)(bt,{handleOrderInfoClick:_})})})}),Object(m.jsx)(i.b,{path:"/forgot-password",children:Object(m.jsx)(O,{children:Object(m.jsx)(Xe,{})})}),Object(m.jsx)(i.b,{path:"/reset-password",children:Object(m.jsx)(O,{children:Object(m.jsx)(Ve,{})})})]})]})};return Object(m.jsx)(o.a,{children:Object(m.jsx)(e,{})})},lr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,212)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))},ur=r(24),_r=r(113),pr=r(115),jr=r(53),mr={ingredients:null,ingredientsRequest:!1,ingredientsFiled:!1,constructorIngredients:[],constructorBun:null};var br={ingredientsConstructor:null,currentIngredient:null,currentOrderInfo:null,modalInner:null};var Or={order:null,orderRequest:!1,orderFiled:!1};var fr={sendEmailSuccess:null,sendEmailRequest:!1,sendEmailFailed:!1,resetPasswordRequest:!1,resetPasswordSuccess:null,resetPasswordFailed:!1,emailCode:""};var xr={userReguest:!1,userFailed:!1,user:null,name:"",email:"",password:""};var hr={wsAllOrdersConnect:!1,allOrders:null,wsUserOrdersConnect:!1,userOrders:null};var gr={wsInit:it,onOpen:nt,onClose:ct,onError:at,onMessage:st},vr={wsInit:_t,onOpen:ot,onClose:lt,onError:dt,onMessage:ut},yr=Object(ur.b)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:br,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vt:return Object(de.a)(Object(de.a)({},e),{},{currentIngredient:t.payload});case Nt:return Object(de.a)(Object(de.a)({},e),{},{currentOrderInfo:t.payload});case ht:return Object(de.a)(Object(de.a)({},e),{},{modalInner:{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",type:"ingredientDetails"}});case gt:return Object(de.a)(Object(de.a)({},e),{},{modalInner:{title:null,type:"orderDetails"}});case yt:return Object(de.a)(Object(de.a)({},e),{},{modalInner:{title:t.payload,type:"orderInfo"}});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case er:return Object(de.a)(Object(de.a)({},e),{},{orderRequest:!0});case tr:return Object(de.a)(Object(de.a)({},e),{},{orderRequest:!1,order:t.payload});case rr:return Object(de.a)(Object(de.a)({},e),{},{orderRequest:!1,orderFiled:!0});case nr:return Object(de.a)(Object(de.a)({},e),{},{order:null});default:return e}},ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(de.a)(Object(de.a)({},e),{},{ingredientsRequest:!0});case je:return Object(de.a)(Object(de.a)({},e),{},{ingredientsFiled:!0,ingredientsRequest:!1});case pe:return Object(de.a)(Object(de.a)({},e),{},{ingredients:t.payload,ingredientsFiled:!1,ingredientsRequest:!1});case me:return Object(de.a)(Object(de.a)({},e),{},{constructorIngredients:[].concat(Object(jr.a)(e.constructorIngredients),[t.payload])});case be:return Object(de.a)(Object(de.a)({},e),{},{constructorIngredients:e.constructorIngredients.filter((function(e){return e.drag_id!==t.payload.drag_id}))});case Oe:return Object(de.a)(Object(de.a)({},e),{},{constructorBun:t.payload});case fe:var r=Object(jr.a)(e.constructorIngredients),n=r[t.payload.dragIndex],a=r[t.payload.hoverIndex];return r[t.payload.hoverIndex]=n,r[t.payload.dragIndex]=a,Object(de.a)(Object(de.a)({},e),{},{constructorIngredients:r});case xe:return Object(de.a)(Object(de.a)({},e),{},{constructorIngredients:[],constructorBun:null});default:return e}},resetPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Le:return Object(de.a)(Object(de.a)({},e),{},{sendEmailRequest:!0});case Ue:return Object(de.a)(Object(de.a)({},e),{},{sendEmailSuccess:t.payload,sendEmailRequest:!1,sendEmailFailed:!1});case Me:return Object(de.a)(Object(de.a)({},e),{},{sendEmailFailed:!0,sendEmailRequest:!1});case Pe:return Object(de.a)(Object(de.a)({},e),{},{resetPasswordRequest:!0});case Fe:return Object(de.a)(Object(de.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSuccess:t.payload});case Be:return Object(de.a)(Object(de.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!0});case Ge:return Object(de.a)(Object(de.a)({},e),{},{emailCode:t.payload});case qe:return Object(de.a)(Object(de.a)({},e),{},{emailCode:""});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(de.a)(Object(de.a)({},e),{},{userReguest:!0});case y:return Object(de.a)(Object(de.a)({},e),{},{userReguest:!1,userFailed:!1,user:t.payload});case N:return Object(de.a)(Object(de.a)({},e),{},{userReguest:!1,userFailed:!0,user:null});case w:return Object(de.a)(Object(de.a)({},e),{},{email:t.payload});case E:return Object(de.a)(Object(de.a)({},e),{},{email:""});case S:return Object(de.a)(Object(de.a)({},e),{},{password:t.payload});case T:return Object(de.a)(Object(de.a)({},e),{},{password:""});case I:return Object(de.a)(Object(de.a)({},e),{},{name:t.payload});case k:return Object(de.a)(Object(de.a)({},e),{},{name:""});default:return e}},wsOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case _t:case nt:return Object(de.a)(Object(de.a)({},e),{},{wsAllOrdersConnect:!0});case at:case ct:return Object(de.a)(Object(de.a)({},e),{},{wsAllOrdersConnect:!1});case st:return Object(de.a)(Object(de.a)({},e),{},{allOrders:t.payload});case ot:return Object(de.a)(Object(de.a)({},e),{},{wsUserOrdersConnect:!0});case dt:case lt:return Object(de.a)(Object(de.a)({},e),{},{wsUserOrdersConnect:!1});case ut:return Object(de.a)(Object(de.a)({},e),{},{userOrders:t.payload});default:return e}}});function Nr(e,t,r){var n=(r=r||{}).expires;if("number"==typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=r.expires=a}n&&n.toUTCString&&(r.expires=n.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in r){c+="; "+s;var i=r[s];!0!==i&&(c+="="+i)}document.cookie="".concat(c,"; path=/;")}function wr(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var Er=["success"],Sr=function(e,t){return function(r){var n=null;return function(a){return function(c){var s=r.dispatch,i=c.type,o=t.wsInit,d=t.onOpen,l=t.onClose,u=t.onError,_=t.onMessage;i===o&&(n=e?new WebSocket("wss://norma.nomoreparties.space/orders?token=".concat(wr("accessToken"))):new WebSocket("wss://norma.nomoreparties.space/orders/all")),n&&(n.onopen=function(e){s({type:d,payload:e})},n.onerror=function(e){s({type:u,payload:e})},n.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(Kt.a)(r,Er));s({type:_,payload:n})},n.onclose=function(e){s({type:l,payload:e})}),a(c)}}}},Tr=r(4),Ir="https://norma.nomoreparties.space/api",kr=function(e){return e.ok?e.json().then((function(e){return(null===e||void 0===e?void 0:e.success)?e:Promise.reject(e)})):e.json().then((function(e){return Promise.reject(e)}))},Cr=Ht.a.mark(Ar),Rr=Ht.a.mark(Lr),Dr=function(){return fetch("".concat(Ir,"/ingredients")).then(kr)};function Ar(){var e;return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Tr.b)(Dr);case 3:return e=t.sent,t.next=6,Object(Tr.c)((r=e.data,{type:pe,payload:r}));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Tr.c)({type:je});case 12:case"end":return t.stop()}var r}),Cr,null,[[0,8]])}function Lr(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Tr.f)(_e,Ar);case 2:case"end":return e.stop()}}),Rr)}var Ur=Ht.a.mark(Zr),Mr=Ht.a.mark(Hr),Pr=Ht.a.mark(Vr),Fr=Ht.a.mark(Kr),Br=Ht.a.mark(Yr),Gr=Ht.a.mark($r);function qr(e,t){return fetch("".concat(Ir,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:e,password:t})}).then(kr)}function Qr(){return fetch("".concat(Ir,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(kr)}function Jr(){return fetch("".concat(Ir,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+wr("accessToken")}}).then(kr)}function Wr(){return fetch("".concat(Ir,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}function zr(e,t,r){return fetch("".concat(Ir,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+wr("accessToken")},body:JSON.stringify({email:e,name:t,password:r})}).then(kr)}function Xr(e,t,r){return fetch("".concat(Ir,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:e,email:t,password:r})}).then(kr)}function Zr(){var e,t,r,n,a,c;return Ht.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(Tr.d)((function(e){return{email:e.user.email,password:e.user.password}}));case 3:return e=s.sent,t=e.email,r=e.password,s.next=8,Object(Tr.b)(qr,t,r);case 8:return n=s.sent,s.next=11,Object(Tr.c)(D(n.user));case 11:return s.next=13,Object(Tr.c)(U());case 13:return s.next=15,Object(Tr.c)(P());case 15:return s.next=17,Object(Tr.c)(F(n.user.name));case 17:return s.next=19,Object(Tr.c)(L(n.user.email));case 19:a=n.accessToken.split("Bearer ")[1],c=n.refreshToken,Nr("accessToken",a),localStorage.setItem("refreshToken",c),s.next=29;break;case 25:return s.prev=25,s.t0=s.catch(0),s.next=29,Object(Tr.c)({type:"USER_LOGIN_FAILED"});case 29:case"end":return s.stop()}}),Ur,null,[[0,25]])}function Hr(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Tr.b)(Qr);case 3:return e.sent,localStorage.removeItem("refreshToken"),Nr("accessToken",null,{expires:-1}),e.next=8,Object(Tr.c)(D(null));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Tr.c)({type:"USER_LOGOUT_FAILED"});case 14:case"end":return e.stop()}}),Mr,null,[[0,10]])}function Vr(){var e,t,r,n;return Ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Tr.b)(Jr);case 3:return e=a.sent,a.next=6,Object(Tr.c)(D(e.user));case 6:return a.next=8,Object(Tr.c)(F(e.user.name));case 8:return a.next=10,Object(Tr.c)(L(e.user.email));case 10:a.next=32;break;case 12:if(a.prev=12,a.t0=a.catch(0),"jwt expired"!==(null===a.t0||void 0===a.t0?void 0:a.t0.message)){a.next=30;break}return a.next=17,Object(Tr.b)(Wr);case 17:if(!(null===(t=a.sent)||void 0===t?void 0:t.success)){a.next=27;break}return r=t.accessToken.split("Bearer ")[1],n=t.refreshToken,Nr("accessToken",r),localStorage.setItem("refreshToken",n),a.next=25,Object(Tr.c)(R());case 25:a.next=29;break;case 27:return a.next=29,Object(Tr.c)(A());case 29:return a.abrupt("return");case 30:return a.next=32,Object(Tr.c)(A());case 32:case"end":return a.stop()}}),Pr,null,[[0,12]])}function Kr(){var e,t,r,n,a,c,s,i;return Ht.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(Tr.d)((function(e){return{email:e.user.email,name:e.user.name,password:e.user.password}}));case 3:return e=o.sent,t=e.email,r=e.name,n=e.password,o.next=9,Object(Tr.b)(zr,t,r,n);case 9:return a=o.sent,o.next=12,Object(Tr.c)(D(a.user));case 12:return o.next=14,Object(Tr.c)(F(a.user.name));case 14:return o.next=16,Object(Tr.c)(L(a.user.email));case 16:o.next=38;break;case 18:if(o.prev=18,o.t0=o.catch(0),"jwt expired"!==(null===o.t0||void 0===o.t0?void 0:o.t0.message)){o.next=36;break}return o.next=23,Object(Tr.b)(Wr);case 23:if(!(null===(c=o.sent)||void 0===c?void 0:c.success)){o.next=33;break}return s=c.accessToken.split("Bearer ")[1],i=c.refreshToken,Nr("accessToken",s),localStorage.setItem("refreshToken",i),o.next=31,Object(Tr.c)(C());case 31:o.next=35;break;case 33:return o.next=35,Object(Tr.c)({type:"UPDATE_USER_INFO_FAILED"});case 35:return o.abrupt("return");case 36:return o.next=38,Object(Tr.c)({type:"UPDATE_USER_INFO_FAILED"});case 38:case"end":return o.stop()}}),Fr,null,[[0,18]])}function Yr(){var e,t,r,n,a,c,s;return Ht.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(Tr.d)((function(e){return{email:e.user.email,name:e.user.name,password:e.user.password}}));case 3:return e=i.sent,t=e.email,r=e.name,n=e.password,i.next=9,Object(Tr.b)(Xr,t,r,n);case 9:return a=i.sent,i.next=12,Object(Tr.c)(D(a.user));case 12:return i.next=14,Object(Tr.c)(U());case 14:return i.next=16,Object(Tr.c)(P());case 16:return i.next=18,Object(Tr.c)({type:k});case 18:c=a.accessToken.split("Bearer ")[1],s=a.refreshToken,Nr("accessToken",c),localStorage.setItem("refreshToken",s),i.next=28;break;case 24:return i.prev=24,i.t0=i.catch(0),i.next=28,Object(Tr.c)({type:"USER_REGISTER_FAILED"});case 28:case"end":return i.stop()}}),Br,null,[[0,24]])}function $r(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Tr.f)(h,Zr);case 2:return e.next=4,Object(Tr.f)(x,Hr);case 4:return e.next=6,Object(Tr.f)(v,Vr);case 6:return e.next=8,Object(Tr.f)(g,Kr);case 8:return e.next=10,Object(Tr.f)(f,Yr);case 10:case"end":return e.stop()}}),Gr)}var en=Ht.a.mark(nn),tn=Ht.a.mark(an);function rn(e){return fetch("".concat(Ir,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer "+wr("accessToken")},body:JSON.stringify({ingredients:e})}).then(kr)}function nn(){var e,t,r,n,a,c,s,i,o;return Ht.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,Object(Tr.d)((function(e){return{constructorIngredients:e.ingredients.constructorIngredients,constructorBun:e.ingredients.constructorBun}}));case 3:return e=d.sent,t=e.constructorIngredients,r=e.constructorBun,n=t.map((function(e){return e._id})),a=[].concat(Object(jr.a)(n),[r._id,r._id]),d.next=10,Object(Tr.b)(rn,a);case 10:return c=d.sent,d.next=13,Object(Tr.c)((l=c.order,{type:tr,payload:l}));case 13:return d.next=15,Object(Tr.c)({type:xe});case 15:d.next=37;break;case 17:if(d.prev=17,d.t0=d.catch(0),"jwt expired"!==(null===d.t0||void 0===d.t0?void 0:d.t0.message)){d.next=35;break}return d.next=22,Object(Tr.b)(Wr);case 22:if(!(null===(s=d.sent)||void 0===s?void 0:s.success)){d.next=32;break}return i=s.accessToken.split("Bearer ")[1],o=s.refreshToken,Nr("accessToken",i),localStorage.setItem("refreshToken",o),d.next=30,Object(Tr.c)(ar());case 30:d.next=34;break;case 32:return d.next=34,Object(Tr.c)(cr());case 34:return d.abrupt("return");case 35:return d.next=37,Object(Tr.c)(cr());case 37:case"end":return d.stop()}var l}),en,null,[[0,17]])}function an(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Tr.f)(er,nn);case 2:case"end":return e.stop()}}),tn)}var cn=Ht.a.mark(un),sn=Ht.a.mark(_n),on=Ht.a.mark(pn),dn=function(e){return fetch("".concat(Ir,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({email:e})}).then(kr)},ln=function(e,t){return fetch("".concat(Ir,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({password:e,token:t})}).then(kr)};function un(){var e,t;return Ht.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(Tr.d)((function(e){return e.user.email}));case 3:return e=r.sent,r.next=6,Object(Tr.b)(dn,e);case 6:return t=r.sent,r.next=9,Object(Tr.c)(Qe(t));case 9:return r.next=11,Object(Tr.c)(U());case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(Tr.c)({type:Me});case 17:case"end":return r.stop()}}),cn,null,[[0,13]])}function _n(){var e,t,r,n;return Ht.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Tr.d)((function(e){return{password:e.user.password,emailCode:e.resetPassword.emailCode}}));case 3:return e=a.sent,t=e.emailCode,r=e.password,a.next=8,Object(Tr.b)(ln,r,t);case 8:return n=a.sent,a.next=11,Object(Tr.c)(Je(n));case 11:return a.next=13,Object(Tr.c)({type:qe});case 13:return a.next=15,Object(Tr.c)(P());case 15:a.next=21;break;case 17:return a.prev=17,a.t0=a.catch(0),a.next=21,Object(Tr.c)({type:Be});case 21:case"end":return a.stop()}}),sn,null,[[0,17]])}function pn(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Tr.f)(Pe,_n);case 2:return e.next=4,Object(Tr.f)(Le,un);case 4:case"end":return e.stop()}}),on)}var jn=Ht.a.mark(mn);function mn(){var e;return Ht.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[Lr,$r,pn,an],t.next=3,Object(Tr.a)(e.map((function(e){return Object(Tr.e)(e)})));case 3:case"end":return t.stop()}}),jn)}var bn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ur.c,On=Object(pr.a)(),fn=bn(Object(ur.a)(_r.a,On,Sr(null,gr),Sr("token",vr))),xn=Object(ur.d)(yr,fn);On.run(mn),s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(d.a,{store:xn,children:Object(m.jsx)(dr,{})})}),document.getElementById("root")),lr()},25:function(e,t,r){e.exports={container_orders_item_wrapper:"order-item_container_orders_item_wrapper__3BxTS",container_orders_item:"order-item_container_orders_item__2fTeU",container_orders_item_total:"order-item_container_orders_item_total__1rn0K",container_orders_item_footer:"order-item_container_orders_item_footer__1SzgQ",container_orders_item_ingredients:"order-item_container_orders_item_ingredients__O-fv2",container_orders_item_ingredient:"order-item_container_orders_item_ingredient__2YJry",container_orders_item_ingredient_length:"order-item_container_orders_item_ingredient_length__1bskB",order_header:"order-item_order_header__3xlQJ"}},26:function(e,t,r){e.exports={container:"feed-page_container__2J0Fj",container_wrapper:"feed-page_container_wrapper__3c-1P",orders_wrapper:"feed-page_orders_wrapper__3P7ZO",details_column:"feed-page_details_column__rzADJ",orders_status_column:"feed-page_orders_status_column__3X0dy",order_done_text:"feed-page_order_done_text__1qzvr"}},27:function(e,t,r){e.exports={order_wrapper:"order-details-page_order_wrapper__OsUz0",count:"order-details-page_count__2qmme",count_descr:"order-details-page_count_descr__1ZNPk",footer_title:"order-details-page_footer_title__2Q-ZB",footer_descr:"order-details-page_footer_descr__2UYQj",image_wrapper:"order-details-page_image_wrapper__33qlg",accept:"order-details-page_accept__1ufdp",background:"order-details-page_background__2zgHa"}},30:function(e,t,r){e.exports={container_nav_item:"profile-nav_container_nav_item__39rgT",active:"profile-nav_active__spFA5",container_nav_descr:"profile-nav_container_nav_descr__1-dfX"}},31:function(e,t,r){e.exports={form_container:"login-page_form_container__20Q45",form_wrapper:"login-page_form_wrapper__3M9WU",form:"login-page_form__2NMPB",form_descr:"login-page_form_descr__fGTg2",form_link:"login-page_form_link__17D3-"}},32:function(e,t,r){e.exports={title:"ingredient-details_title__3cKML",image:"ingredient-details_image__1n5Bd",subtitle:"ingredient-details_subtitle__1w1vC",footer:"ingredient-details_footer__1Mlj3",footer_item:"ingredient-details_footer_item__31s4m"}},33:function(e,t,r){e.exports={count:"order-details_count__oZTbu",count_descr:"order-details_count_descr__1rYXc",footer_title:"order-details_footer_title__314mD",footer_descr:"order-details_footer_descr__86zMZ",image_wrapper:"order-details_image_wrapper__159G8",accept:"order-details_accept__2EIhD",background:"order-details_background__3bAih"}},34:function(e,t,r){e.exports={order_info_wrapper:"order-info_order_info_wrapper__1a8Wm",order_info_item:"order-info_order_info_item__11-xg",order_info_icon:"order-info_order_info_icon__2DjZC order-item_container_orders_item_ingredient__2YJry",order_info_title:"order-info_order_info_title__3pOpF",order_info_footer:"order-info_order_info_footer__R7xC8",order_info_time:"order-info_order_info_time__HQbDz"}},36:function(e,t,r){e.exports={modal:"modal_modal__3pLKz",modal_wrapper:"modal_modal_wrapper__1TxPT",modal_title:"modal_modal_title__qf4n-",modal_close:"modal_modal_close__2E9aa",modal_overlay:"modal_modal_overlay__2AQst"}},40:function(e,t,r){e.exports={ingredient:"burger-ingredients-item_ingredient___0Dsp",ingredient_counter:"burger-ingredients-item_ingredient_counter__5XGbI",ingredient_img:"burger-ingredients-item_ingredient_img__3ZCiE",ingredient_price_wrapper:"burger-ingredients-item_ingredient_price_wrapper__Nn77P",ingredient_name:"burger-ingredients-item_ingredient_name__1wCTL"}},41:function(e,t,r){e.exports={section_container:"burger-ingredients_section_container__380-V",tab_wrapper:"burger-ingredients_tab_wrapper__2VCET",ingredients_wrapper:"burger-ingredients_ingredients_wrapper__2tTrM",ingredients_items_wrapper:"burger-ingredients_ingredients_items_wrapper__1zml8"}},42:function(e,t,r){e.exports={section_container:"burger-constructor_section_container__EMoME",drop:"burger-constructor_drop__307kS",wrapper_inner:"burger-constructor_wrapper_inner__2jQ75",constructor_footer:"burger-constructor_constructor_footer__3ngtX",total_wrapper:"burger-constructor_total_wrapper__JyANG",no_ingredients:"burger-constructor_no_ingredients__3V4VJ"}},43:function(e,t,r){e.exports={form_container:"register-page_form_container__3dBc0",form_wrapper:"register-page_form_wrapper__3IcY3",form:"register-page_form__3jTQ0",form_descr:"register-page_form_descr__3rndH",form_link:"register-page_form_link__2K_TN"}},44:function(e,t,r){e.exports={form_container:"forgot-password-page_form_container__1A3OG",form_wrapper:"forgot-password-page_form_wrapper__L00MD",form:"forgot-password-page_form__36e-9",form_descr:"forgot-password-page_form_descr__1G4gd",form_link:"forgot-password-page_form_link__2LQaB"}},45:function(e,t,r){e.exports={form_container:"reset-password-page_form_container__1PXRb",form_wrapper:"reset-password-page_form_wrapper__2Kpze",form:"reset-password-page_form__3QwKo",form_descr:"reset-password-page_form_descr__1eNsy",form_link:"reset-password-page_form_link__2DFgf"}},54:function(e,t,r){e.exports={form_wrapper:"profile-page_form_wrapper__3FmUZ",profile_btn_wrapper:"profile-page_profile_btn_wrapper__1JQwM",profile_btn_cancel:"profile-page_profile_btn_cancel__3Wj7Y"}},63:function(e,t,r){e.exports={constructor_item:"burger-constructor-item_constructor_item__duFMh",active:"burger-constructor-item_active__31VZu"}},85:function(e,t,r){e.exports={ingredients_type_wrapper:"burger-ingredients-list_ingredients_type_wrapper__2J3MG"}},87:function(e,t,r){e.exports={container:"orders-page_container__sxHI2",container_orders:"orders-page_container_orders__3QgS_",container_orders_wrapper:"orders-page_container_orders_wrapper__XP11G"}},88:function(e,t,r){e.exports={ingredient_wrapper:"ingredient-item-page_ingredient_wrapper__HApeU",ingredient_title:"ingredient-item-page_ingredient_title__31NA6",title:"ingredient-item-page_title__ZEXgG",image:"ingredient-item-page_image__1OSnQ",subtitle:"ingredient-item-page_subtitle__3yR92",footer:"ingredient-item-page_footer__1DcqA",footer_item:"ingredient-item-page_footer_item__2v1Qn"}},89:function(e,t,r){e.exports={order_wrapper:"order-info-page_order_wrapper__3ZyIb",title:"order-info-page_title__gKTMD"}}},[[202,1,2]]]);
//# sourceMappingURL=main.7bb3b9c6.chunk.js.map